<?xml version="1.0" encoding="UTF-8"?>
<scraper framework="1.0" date="2009-05-22" name="TV Rage" content="tvshows" thumb="tvrage.jpg" language="en">
	<NfoUrl dest="3">
		<RegExp input="$$1" output="&lt;url&gt;http://www.tvrage.com/\1&lt;/url&gt;&lt;id&gt;\2&lt;/id&gt;"  dest="3">
			<expression clear="yes" noclean="1">tvrage.com/(series/id-([0-9]*))</expression>
		</RegExp>
		<RegExp input="$$1" output="&lt;url&gt;http://www.tvrage.com/\1&lt;/url&gt;"  dest="3+">
			<expression clear="yes" noclean="1">tvrage.com/([^/ ]*)(?!/id-[0-9])[/ ]</expression>
		</RegExp>
	</NfoUrl>
	<CreateSearchUrl dest="3">
		<RegExp input="$$1" output="&lt;url&gt;http://services.tvrage.com/feeds/search.php?show=\1&lt;/url&gt;" dest="3">
			<expression/>	
		</RegExp>
	</CreateSearchUrl>
	<GetSearchResults dest="3">
		<RegExp input="$$4" output="&lt;results&gt;\1&lt;/results&gt;" dest="3">	
			<RegExp input="$$1" output="&lt;entity&gt;&lt;title&gt;\2&lt;/title&gt;&lt;url&gt;\3&lt;/url&gt;&lt;id&gt;\1&lt;/id&gt;&lt;/entity&gt;" dest="4">
				<expression repeat="yes">&lt;showid&gt;([^&gt;]*)&lt;/showid&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;link&gt;([^&lt;]*)&lt;/link&gt;</expression>	
			</RegExp>
			<expression noclean="1"/>
		</RegExp>		
	</GetSearchResults>
	<GetDetails dest="7">
		<RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="7">
			<RegExp input="$$1" output="&lt;title&gt;\1&lt;/title&gt;" dest="5">
				<expression>&lt;a name=&apos;summary&apos;&gt;.*?&lt;/a&gt;(.*?) Summary&lt;/h[0-9]&gt;</expression>
			</RegExp>
			<RegExp input="$$2" output="&lt;id&gt;\1&lt;/id&gt;" dest="5+">
				<RegExp input="$$1" output="\1" dest="2">
					<expression>/shows/([0-9]*)/</expression>
				</RegExp>
				<expression/>
			</RegExp>
			<RegExp input="$$1" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="5+">				
				<expression>&lt;/table&gt;&lt;table.*?&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;(?:&lt;div [^&gt;]*id=&apos;sft_1&apos;&gt;)?(.*?)(?:\n&lt;br&gt;\n&lt;a onclick=.*?|\n)&lt;br&gt;\n?&amp;nbsp;?&lt;/td&gt;&lt;/tr&gt;</expression>
			</RegExp>						
			<RegExp input="$$1" output="&lt;rating&gt;\1&lt;/rating&gt;&lt;votes&gt;\2&lt;/votes&gt;" dest="5+">
				<expression>&lt;strong&gt;([0-9.]+)/10 \(([0-9]*) Votes cast\)&lt;/td&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;actor&gt;&lt;name&gt;\1&lt;/name&gt;&lt;role&gt;\2&lt;/role&gt;&lt;/actor&gt;"  dest="5+">
				<expression repeat="yes">a href='/person/[^&gt;]*&gt;([^(&lt;|\(|/)]*)(?: [0-9()]*)?&lt;/a&gt;&lt;/i&gt;&lt;/span&gt;&lt;/td&gt;&lt;td[^&gt;]*&gt;&lt;b&gt;played&lt;/b&gt;&lt;/td&gt;&lt;td[^&gt;]*&gt;&lt;div[^&gt;]*&gt;&lt;i&gt;([^(&lt;|\(|/)]*)</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;thumb&gt;\1&lt;/thumb&gt;" dest="5+">
				<expression>(http://images\.tvrage\.com/shows/[0-9/]+\.(gif|jpg|png))</expression>
			</RegExp>	
			<RegExp input="$$1" output="&lt;status&gt;\1&lt;/status&gt;" dest="5+">
				<expression trim="1">Status: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;([^&lt;]*)&lt;/td&gt;</expression>
			</RegExp>							 
			<RegExp input="$$1" output="&lt;premiered&gt;\1&lt;/premiered&gt;" dest="5+">
				<expression trim="1">Premiere: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;([^&lt;]*)&lt;/td&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;runtime&gt;\1&lt;/runtime&gt;" dest="5+">
				<expression trim="1">Runtime: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;([^&lt;]*)&lt;/td&gt;</expression>
			</RegExp>	
			<RegExp input="$$6" output="&lt;genre&gt;\1&lt;/genre&gt;" dest="5+">			
				<RegExp input="$$1" output="| \1" dest="6">
					<expression noclean="1">Genre: &lt;/b&gt;&lt;/td&gt;&lt;td&gt;([^&lt;]*)&lt;/td&gt;</expression>
				</RegExp>		
				<expression repeat="yes">\| ([^\|]*)</expression>
			</RegExp>
			<RegExp output="&lt;episodeguide&gt;&lt;url&gt;http://services.tvrage.com/feeds/episode_list.php?sid=$$2&lt;/url&gt;&lt;/episodeguide&gt;" dest="5+">
				<expression />
			</RegExp>																 
			<expression noclean="1"/>
		</RegExp>
	</GetDetails>		
	<GetEpisodeList dest="3">
		<RegExp input="$$5" output="&lt;episodeguide&gt;\1&lt;/episodeguide&gt;" dest="3">
			<RegExp input="$$1" output="&lt;episode&gt;&lt;url&gt;\4&lt;/url&gt;&lt;title&gt;\6&lt;/title&gt;&lt;epnum&gt;\3&lt;/epnum&gt;&lt;season&gt;\$1&lt;/season&gt;&lt;absoluteEp&gt;\2&lt;/absoluteEp&gt;&lt;id&gt;\5&lt;/id&gt;&lt;/episode&gt;" dest="5+">
				<expression repeat="yes">(?:&lt;Season no=&quot;([0-9]*)&quot;&gt;.*?)?&lt;epnum&gt;([^&lt;]*)&lt;/epnum&gt;.*?&lt;seasonnum&gt;([^&lt;]*)&lt;/seasonnum&gt;.*?&lt;link&gt;([^&lt;]*/([0-9]*))&lt;/link&gt;&lt;title&gt;([^&lt;]*)&lt;/title&gt;</expression>
			</RegExp>	
			<RegExp input="$$1" output="&lt;episode&gt;&lt;url&gt;\2&lt;/url&gt;&lt;season&gt;\1&lt;/season&gt;&lt;title&gt;\4&lt;/title&gt;&lt;id&gt;\3&lt;/id&gt;&lt;/episode&gt;" dest="5+">
				<expression repeat="yes">&lt;season&gt;([^&lt;]*)&lt;/season&gt;.*?&lt;link&gt;([^&lt;]*/([0-9]*))&lt;/link&gt;&lt;title&gt;([^&lt;]*)&lt;/title&gt;</expression>
			</RegExp>
			<expression noclean="1"/>			
		</RegExp>				
	</GetEpisodeList>		
	<GetEpisodeDetails dest="3">
		<RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">	
			<RegExp input="$$1" output="&lt;title&gt;\1&lt;/title&gt;" dest="5">
				<expression>Title: &lt;/b&gt;&lt;/td&gt;&lt;td class='b2'[^&gt;]*&gt;([^&lt;]*)&lt;/td&gt;</expression>
			</RegExp>	
			<RegExp input="$$1" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="5+">
				<expression>&lt;td&gt;&lt;table width=&apos;100%&apos;&gt;&lt;tr&gt;&lt;td valign=&apos;top&apos;&gt;&lt;table width=&apos;100%&apos;&gt;&lt;tr&gt;&lt;td&gt;.*?&lt;/script&gt;&lt;br&gt;(.*?)&lt;br&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;rating&gt;\1&lt;/rating&gt;&lt;votes&gt;\2&lt;/votes&gt;" dest="5+">
				<expression>&lt;strong&gt;([0-9.]+)/10 \(([0-9]*) Votes cast\)&lt;/td&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;aired&gt;\1&lt;/aired&gt;" dest="5+">
				<expression>Original Airdate: &lt;/b&gt;&lt;/td&gt;&lt;td class='b2'[^&gt;]*&gt;([^&lt;]*)</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;thumb&gt;\1&lt;/thumb&gt;" dest="5+">
				<expression>(http://images\.tvrage\.com/screencaps/[0-9/]*\.(jpg|gif|png))</expression>
			</RegExp>				
			<RegExp input="$$1" output="&lt;code&gt;\1&lt;/code&gt;" dest="5+">
				<expression>Production Number: &lt;/b&gt;&lt;/td&gt;&lt;td class='b2'[^&gt;]*&gt;([^&lt;]*)&lt;/td&gt;</expression>
			</RegExp>							
			<RegExp input="$$1" output="&lt;actor&gt;&lt;name&gt;\1&lt;/name&gt;&lt;role&gt;\2&lt;/role&gt;&lt;/actor&gt;"  dest="5+">
				<expression repeat="yes">a href=&#x27;/person/[^&gt;]*&gt;([^(&lt;|\(|/)]*).*?&lt;/a&gt;&lt;/i&gt;&lt;/td&gt;&lt;td[^&gt;]*&gt;&lt;b&gt;(?:played|voiced)&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;i&gt;([^(&lt;|\(|/)]*)</expression>
			</RegExp>
			<RegExp input="$$2" output="&lt;director&gt;\1&lt;/director&gt;" dest="5+">			
				<RegExp input="$$1" output="| \1" dest="2">
					<expression noclean="1">Director: &lt;/b&gt;&lt;/td&gt;&lt;td[^&gt;]*&gt;&lt;i&gt;&lt;a href='/person/[^&gt;]*&gt;([^(&lt;|\(|/)]*)&lt;/a&gt;&lt;/i&gt;</expression>
				</RegExp>		
				<expression repeat="yes">\| ([^\|]*)</expression>
			</RegExp>
			<RegExp input="$$2" output="&lt;credits&gt;\1&lt;/credits&gt;" dest="5+">			
				<RegExp input="$$1" output="| \1" dest="2">
					<expression noclean="1">Writer: &lt;/b&gt;&lt;/td&gt;&lt;td[^&gt;]*&gt;&lt;i&gt;&lt;a href='/person/[^&gt;]*&gt;([^(&lt;|\(|/)]*)&lt;/a&gt;&lt;/i&gt;</expression>
				</RegExp>		
				<expression repeat="yes">\| ([^\|]*)</expression>
			</RegExp>
			<expression noclean="1"/>	
		</RegExp>
	</GetEpisodeDetails>			
</scraper>
